name: 'Nightly Operator Release'

on:
  schedule:
    - cron: '0 6 * * *'  # Daily at 6 AM UTC
  workflow_dispatch:
    inputs:
      run-tests:
        description: 'Run integration tests before release'
        required: false
        type: boolean
        default: false

permissions:
  contents: read
  packages: write
  id-token: write
  attestations: write

jobs:
  nightly-release:
    name: 'Tekton Operator Nightly Release'
    uses: ./.github/workflows/nightly-release-template.yml
    with:
      project-name: 'operator'
      git-repository: 'github.com/tektoncd/operator'
      registry-namespace: 'tektoncd/operator'
      run-tests: ${{ inputs.run-tests || false }}
      kubernetes-version: 'v1.31.0'
      enable-chains: true
    secrets:
      GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      REGISTRY_TOKEN: ${{ secrets.GITHUB_TOKEN }} 